
단, 동시에 두 프로세스가 하나의 자원에 접근하는 일은 막아야 한다.

하나의 구현 예시)

A가 0을 읽고 1을 더했고 같은 위치에 1로 저장한다.
B가 1을 읽고 1을 더해서 같은 위치에 2로 저장한다.

A가 0을 읽고 B가 0을 읽고 A, B 1을 더했고 같은 위치에 1로 저장한다.

문제 발생

하나의 영역을 지정해두고, 그 영역에 무언가를 생산하는 건 producer 만 가능하도록 하고, 소비하는 건 consumer만 가능하도록 설계해서, consumer보고 그 영역에 아직 아무것도 만들어지지 않으면 대기시키는 방법으로 구현 가능하다. 

이때 두 가지 방법의 버퍼가 쓰일 수 있는데

- unbounded buffer: 사이즈에 아무런 규약도 제약도 없다. 프로듀서는 언제나 뒤에 새로운 아이템을 계속 만들어나갈 수 있다.
- bounded buffer: 정해진 사이즈가 있다. 만약 버퍼가 꽉 차면 프로듀서는 컨수머가 소비하기를 기다려야 한다.

![](attachments/Pasted%20image%2020230211193230.png)
버퍼는 이런 식으로 원형 배열 방식으로 구현될 수 있다.

![](attachments/Pasted%20image%2020230211193319.png)
이때, 컨수머와 프로슈서가 동시에 이 영역에 접근하는 일은 없어야 한다. 이를 위해 동기화가 필요하다. 자세한 내용은 챕터 6, 7에서 다룬다.

![](attachments/Pasted%20image%2020230211193611.png)

	12, 13은 각각 컨수머와 프로듀서의 코드 로직이다.