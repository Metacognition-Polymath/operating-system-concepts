# 2. 운영체제 구조(Operating system structures)

- 운영체제는 운영체제 안에서 프로그램이 실행되는 환경을 제공해 준다
- 운영체제들의 구조는 크게 차이가 있다
- 새로운 운영체제를 설계하는 일은 대단히 큰 작업이다
- 설계를 시작하기 전에 시스템의 목표를 먼저 잘 정의하는 것이 중요하다
- 목표는 여러 가지 전략과 알고리즘 중에서 선택하는 기초가 된다
- 운영체제를 살펴보기 위한 몇 가지 유리한 관점이 있다
  - 첫 번째 관점 : 운영체제가 제공하는 `서비스`에 초점을 맞추는 것 - 사용자
  - 두 번째 관점 : 운영체제가 사용자와 프로그래머에게 제공하는 `인터페이스`에 초점을 맞추는 것 - 프로그래머
  - 세 번째 관점 : `시스템의 구성요소`와 `그들의 상호 연결`에 초점을 맞추는 것 - 운영체제 설계자
- 이번 장에서 사용자, 프로그래머, 그리고 운영체제 설계자의 관점에서 바라본 운영체제의 `세 가지 측면을 모두` 살펴본다
  - 운영체제가 제공하는 `서비스`
  - `서비스 제공 방식`
  - 이 서비스는 어떤 방식으로 제공되는지 - `서비스 제공 방식`
  - 이 서비스들은 어떻게 `디버깅`되며, 이러한 `시스템을 설계하기 위해서는 어떤 다양한 방법`들이 사용되는지 고려한다
- 내 생각) 서비스 : 운영체제가 제공하는 기능들

#### 이 장의 목표

- 운영체제에서 제공하는 서비스를 식별한다
- 운영체제 서비스를 제공하기 위해 시스템 콜을 사용하는 방법을 설명한다
- 운영체제 설계를 위한 모놀리식, 계층화, 마이크로 커널, 모듈 및 하이브리드 전략을 비교 및 대조한다
- 운영체제 부팅 프로세스를 설명한다
- 운영체제 성능을 모니터링하기 위한 도구를 적용한다
- Linux 커널과 상호 작용하기 위한 커널 모듈을 설계하고 구현한다

## 2.1 운영체제 서비스(Operating System Services)

- 운영체제는 프로그램 실행환경을 제공한다
- 운영체제는 프로그램과 그 프로그램의 사용자에게 특정 서비스를 제공한다
- 운영체제 마다 제공하는 서비스는 다르지만 공통된 부류가 있다

  - 그림 2.1 다양한 운영체제 서비스에 대한 한 가지 관점과 그들의 상호 관계
  - 이러한 서비스는 프로그래머가 프로그래밍 작업을 더 쉽게 수행할 수 있도록 한다

- 사용자 인터페이스(user interface)

  - 거의 모든 운영체제는 사용자 인터페이스(UI)를 제공한다
  - 이 인터페이스는 여러 형태로 제공될 수 있다
  - 가장 일반적으로 그래픽 사용자 인터페이스(GUI)가 사용된다
  - 인터페이스란?
    - 윈도 시스템으로 마우스와 키보드를 가지고 있다
  - 휴대전화 및 태블릿과 같은 모바일 시스템 -> 터치 스크린 인터페이스를 제공
  - CLI(Command Line Interface) : 터미널을 통해 명령어를 입력하는 방식

- 프로그램 수행(program execution)

  - 시스템은 프로그램을 메모리에 적재해 실행할 수 있어야 한다
  - 프로그램은 정상적이든, 혹은 비정상적이든 실행을 끝낼 수 있어야 한다

- 입출력 연산(I/O operation)

  - 수행 중인 프로그램은 입출력을 요구할 수 있다
  - 이러한 입출력에는 파일 혹은, 입출력 장치가 연관될 수 있다
  - 특정 장치에 대해서는 특수한 기능(네트워크 인터페이스에서 읽거나 파일 시스템에 쓰기 등)이 요구될 수 있다
  - 효율과 보호를 위해 사용자들은 입출력 장치를 직접 제어할 수 없다
  - 운영체제가 입출력 수행의 수단을 제공해야 한다
    - 내 생각) 키보드, 마우스 연결하면 운영체제가 이를 인식하고, 사용자가 입력한 내용을 읽어들인다

- 통신(communication)

  - 한 프로세스가 다른 프로세스와 정보를 교환해야 할 필요가 있는 상황이 있다
  - 이러한 통신을 수행하는 두 가지 중요한 방법
    - 1. 동일한 컴퓨터에서 수행되고 있는 프로세스들 간의 통신
    - 2. (네트워크에 의해 묶여있는)다른 컴퓨터에서 수행되고 있는 프로세스들 간의 통신
  - 통신 구현 방법
    - 1. 공유 메모리
    - 2. 메시지 전달(message passing) 기법
      - `정보의 패킷`들이 운영체제에 의해 `프로세스들 사이를 이동`한다
      - 내 생각) HTTP와 비슷하네, 네트워크로 연결된 컴퓨터들이 HTTP 방식으로 패킷을 주고 받는 것과 비슷한 것 같다
        - 메시지 전달 기법 또는 공유 메모리도 어떤 규약(protocol)을 따르는 것인가?

- 오류 탐지(error detection)
  - 운영체제는 모든 가능한 오류를 항상 의식하고 있어야 한다
  - 오류는 CPU, 메모리, 입출력 장치, 사용자 프로그램에서 일어날 수 있다
  - 운영체제는 올바르고 일관성 있는 계산을 보장하기 위해 각 유형의 오류에 대해 적당한 조치를 해야 한다
  - 디버깅 설비는 시스템을 효율적으로 사용할 수 있는 사용자와 프로그래머의 능력을 향상 시킨다

#### 사용자에 도움을 주는 것이 목적이 아니라 `시스템 자체의 효율적인 동작을 보장`하기 위한 운영체제 기능들도 존재한다

- 자원 할당(resource allocation)

  - 다수의 프로세스나 다수의 작업이 `동시에 실행`될 때, 그들 각각에 `자원을 할당`해 주어야 한다
  - 운영체제가 관리하는 여러가지 자원 관리 예시
    - CPU를 최대한 효율적으로 이용하기 위해 운영체제는 CPU 스케줄링 루틴이 CPU의 속도, 반드시 실행해야할 프로세스들(우선순위), CPU의 처리 코어의 개수와 다른 요인들을 고려하도록 해야 한다
    - 프린터, USB 저장장치 및 다른 주변 장치를 할당하는 루틴

- 기록 장성(logging)

  - 우리는 어떤 프로그램이 어떤 종류의 컴퓨터 `자원`을 얼마나 많이 `사용`하는지를 `추적`할 수 있길 원한다
  - 로깅은 사용 예
    - 회계 - 사용자들에게 청구서를 보내기 위해
    - 사용 통계
      - 사용통계는 시스템을 재구성하고자 하는 시스템 관리자에게 귀중한 자료가 될 수 있다

- 보호(protection)와 보안(security)
  - 정보 소유자는 그 정보의 사용을 통제하길 원한다
  - 서로 다른 여러 프로세스가 병행하게 수행될 때, 한 프로세스가 다른 프로세스나 운영체제 자체를 방해해서는 안 된다
  - `보호`는 시스템 자원에 대한 모든 `접근이 통제`되도록 보장하는 것을 필요로 한다
  - 보안 - 사용자가 인증하는 것으로 부터 시작
    - 일반적으로 비밀번호를 이용
    - 보안은 네트워크 어댑터 등과 같은 외부 입출력 장치들을 부적합한 접근 시도로부터 지키고, 침입의 탐지를 위해 모든 접속을 기록하는 것으로 범위를 넓힌다
  - 비유 : 사슬의 내구성은 사슬 중 가장 약한 연결고리의 내구성과 같다
    - 운영체제는 시스템의 보호를 위해 모든 자원에 대한 접근을 통제해야 한다
    - 운영체제는 시스템의 보안을 위해 모든 접근을 기록해야 한다

## 2.2 사용자와 운영체제 인터페이스(User and Operating System Interface)

- 사용자와 운영체제가 접촉하는 방식 중 3가지 기본적인 방법에 대해 알아본다
  - 명령어 인터프리터(Command Interpreter) - 명령어를 직접 입력
  - 그래픽 기반 사용자 인터페이스(Graphical User Interface) - 운영체제와 접촉하게 함
  - 터치스크린 인터페이스(Touchscreen Interface) - 운영체제와 접촉하게 함

### 2.2.1 명령 인터프리터 (Command Interpreter)
